{"remainingRequest":"/Users/kimjunho/front/ssafyart_front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kimjunho/front/ssafyart_front/src/components/components/Paintable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kimjunho/front/ssafyart_front/src/components/components/Paintable.vue","mtime":1587609111344},{"path":"/Users/kimjunho/front/ssafyart_front/node_modules/cache-loader/dist/cjs.js","mtime":1579183904604},{"path":"/Users/kimjunho/front/ssafyart_front/node_modules/babel-loader/lib/index.js","mtime":1587098298841},{"path":"/Users/kimjunho/front/ssafyart_front/node_modules/cache-loader/dist/cjs.js","mtime":1579183904604},{"path":"/Users/kimjunho/front/ssafyart_front/node_modules/vue-loader/lib/index.js","mtime":1587098312803}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmxldCBjdXJyZW50WCA9IDA7CmxldCBjdXJyZW50WSA9IDA7CgppbXBvcnQgTmF2aWdhdGlvbiBmcm9tICcuL05hdmlnYXRpb24nOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdwYWludGFibGUnLAogIGNvbXBvbmVudHM6IHsKICAgIE5hdmlnYXRpb24KICB9LAogIHByb3BzOiB7CiAgICBmYWN0b3I6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAxCiAgICB9LAogICAgbmF2aWdhdGlvbjogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBhbHdheXNPblRvcDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgbmFtZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgd2lkdGg6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiB3aW5kb3cuaW5uZXJXaWR0aAogICAgfSwKICAgIGhlaWdodDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IHdpbmRvdy5pbm5lckhlaWdodAogICAgfSwKICAgIGhpZGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICB0aHJlc2hvbGQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAwCiAgICB9LAogICAgc2hvd1VuZG9SZWRvOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBzaG93TGluZVdpZHRoOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBsaW5lV2lkdGg6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiA1CiAgICB9LAogICAgbGluZVdpZHRoRXJhc2VyOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMjAKICAgIH0sCiAgICBjb2xvcnM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IFsKICAgICAgICAnYmxhY2snLAogICAgICAgICcjZjAwJywKICAgICAgICAnIzQ0ODFjNycsCiAgICAgICAgJ3JnYmEoMjU1LCAyMzUsIDU5LCAwLjQpJywKICAgICAgICAnIzk5OScsCiAgICAgICAgJ2dyZWVuJwogICAgICBdCiAgICB9LAogICAgaG9yaXpvbnRhbE5hdmlnYXRpb246IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBkaXNhYmxlTmF2aWdhdGlvbjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGFjdGl2ZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGNvbG9yOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJyMwMDAnCiAgICB9LAogICAgdXNlRXJhc2VyOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3VycmVudENvbG9yOiB0aGlzLmNvbG9yLAogICAgICBjYW52YXNJc0VtcHR5OiBmYWxzZSwKICAgICAgY2FudmFzSWQ6IDAsCiAgICAgIGlzRXJhc2VyQWN0aXZlOiB0aGlzLnVzZUVyYXNlciwKICAgICAgaXNBY3RpdmU6IHRoaXMuYWN0aXZlLAogICAgICBwb2ludENvb3JkczogW10sCiAgICAgIHJlZG9MaXN0OiBbXSwKICAgICAgdW5kb0xpc3Q6IFtdLAogICAgICBjdXJyZW50TGluZVdpZHRoOiB0aGlzLmlzRXJhc2VyQWN0aXZlCiAgICAgICAgPyB0aGlzLmxpbmVXaWR0aEVyYXNlcgogICAgICAgIDogdGhpcy5saW5lV2lkdGgsCiAgICAgIHRlbXBDYW52YXM6IG51bGwsCiAgICAgIHRlbXBDdHg6IG51bGwsCiAgICAgIGNhbnZhczogbnVsbCwKICAgICAgY3R4OiBudWxsLAogICAgICBzdGFydGVkRHJhd2luZzogZmFsc2UsCiAgICAgIGRyYXdNb3ZlRXZlbnQ6ICdtb3VzZW1vdmUnLAogICAgICBkcmF3U3RhcnRFdmVudDogJ21vdXNlZG93bicsCiAgICAgIGRyYXdFbmRFdmVudDogJ21vdXNldXAnLAogICAgICBpc01vdXNlOiB0cnVlLAogICAgICB0aHJlc2hvbGRSZWFjaGVkOiBmYWxzZQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBpc0FjdGl2ZTogJ2luaXQnLAogICAgbmFtZTogJ2luaXQnLAogICAgaGlkZSgpIHsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuaW5pdCgpOwogICAgICB9KTsKICAgIH0sCiAgICBsaW5lV2lkdGgobGluZVdpZHRoKSB7CiAgICAgIHRoaXMuY3VycmVudExpbmVXaWR0aCA9IGxpbmVXaWR0aDsKICAgIH0sCiAgICBsaW5lV2lkdGhFcmFzZXIobGluZVdpZHRoKSB7CiAgICAgIHRoaXMuY3VycmVudExpbmVXaWR0aCA9IGxpbmVXaWR0aDsKICAgIH0sCiAgICB1c2VFcmFzZXIodXNlRXJhc2VyKSB7CiAgICAgIHRoaXMuaXNFcmFzZXJBY3RpdmUgPSB1c2VFcmFzZXI7CiAgICB9LAogICAgYWN0aXZlKGlzQWN0aXZlKSB7CiAgICAgIHRoaXMuaXNBY3RpdmUgPSBpc0FjdGl2ZTsKICAgIH0sCiAgICBjb2xvcihjb2xvcikgewogICAgICB0aGlzLmN1cnJlbnRDb2xvciA9IGNvbG9yOwogICAgICB0aGlzLnRlbXBDdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmN1cnJlbnRDb2xvcjsKICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmN1cnJlbnRDb2xvcjsKICAgIH0sCiAgICBpc0VyYXNlckFjdGl2ZShpc0FjdGl2ZSkgewogICAgICB0aGlzLmN1cnJlbnRMaW5lV2lkdGggPSBpc0FjdGl2ZSA/IHRoaXMubGluZVdpZHRoRXJhc2VyIDogdGhpcy5saW5lV2lkdGg7CiAgICB9LAogICAgY3VycmVudExpbmVXaWR0aChsaW5lV2lkdGgpIHsKICAgICAgdGhpcy5jdHgubGluZVdpZHRoID0gbGluZVdpZHRoOwogICAgICB0aGlzLnRlbXBDdHgubGluZVdpZHRoID0gbGluZVdpZHRoOwogICAgfQogIH0sCiAgYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLmNhbnZhc0lkID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMCk7CiAgfSwKICBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMuaXNUb3VjaCkgewogICAgICB0aGlzLmRyYXdNb3ZlRXZlbnQgPSAndG91Y2htb3ZlJzsKICAgICAgdGhpcy5kcmF3U3RhcnRFdmVudCA9ICd0b3VjaHN0YXJ0JzsKICAgICAgdGhpcy5kcmF3RW5kRXZlbnQgPSAndG91Y2hlbmQnOwogICAgICB0aGlzLmlzTW91c2UgPSBmYWxzZTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvKioKICAgICAqIEdldCBzY2FsaW5nIGZhY3RvciBvZiBjdXJyZW50IGRldmljZQogICAgICovCiAgICBzY2FsaW5nRmFjdG9yKCkgewogICAgICByZXR1cm4gd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTsKICAgIH0sCiAgICAvKioKICAgICAqIENoZWNrIGlmIGl0IGlzIGEgdG91Y2ggZGV2aWNlCiAgICAgKiB0aGFua3MgdG86IGh0dHBzOi8vY3RybHEub3JnL2NvZGUvMTk2MTYtZGV0ZWN0LXRvdWNoLXNjcmVlbi1qYXZhc2NyaXB0CiAgICAgKi8KICAgIGlzVG91Y2goKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgJ29udG91Y2hzdGFydCcgaW4gd2luZG93IHx8CiAgICAgICAgbmF2aWdhdG9yLk1heFRvdWNoUG9pbnRzID4gMCB8fAogICAgICAgIG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzID4gMAogICAgICApOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLyoqCiAgICAgKiBDYW5jZWwgY3VycmVudCBkcmF3aW5nIGFuZCByZW1vdmUgbGluZXMKICAgICAqLwogICAgY2FuY2VsRHJhd2luZygpIHsKICAgICAgdGhpcy5sb2FkSW1hZ2VGcm9tU3RvcmFnZSgpOwogICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7CiAgICAgIHRoaXMuaXNDb2xvclBpY2tlck9wZW4gPSBmYWxzZTsKICAgICAgdGhpcy5pc0xpbmVXaWR0aFBpY2tlck9wZW4gPSBmYWxzZTsKICAgIH0sCiAgICAvKioKICAgICAqIFNldCBzdG9yYWdlIGl0ZW0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkKICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogICAgICovCiAgICBzZXRJdGVtKGtleSwgdmFsdWUpIHsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7CiAgICB9LAogICAgLyoqCiAgICAgKiBHZXQgc3RvcmFnZSBpdGVtCiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5CiAgICAgKi8KICAgIGFzeW5jIGdldEl0ZW0oa2V5KSB7CiAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpOwogICAgfSwKICAgIC8qKgogICAgICogUmVtb3ZlIGl0ZW0gZnJvbSBzdG9yYWdlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5CiAgICAgKi8KICAgIHJlbW92ZUl0ZW0oa2V5KSB7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7CiAgICB9LAogICAgLyoqCiAgICAgKiBJbml0IHBhaW50YWJsZSBjb21wb25lbnQgYW5kIHNldCBhbGwgdmFyaWFibGVzCiAgICAgKi8KICAgIGluaXQoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5wb2ludENvb3JkcyA9IFtdOwoKICAgICAgICAvLyB0ZW1wb3JhcnkgY2FudmFzCiAgICAgICAgdGhpcy50ZW1wQ2FudmFzID0gdGhpcy4kcmVmc1sndGVtcC1jYW52YXMtJyArIHRoaXMuY2FudmFzSWRdOwogICAgICAgIHRoaXMudGVtcEN0eCA9IHRoaXMudGVtcENhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwoKICAgICAgICAvLyBjYW52YXMgd2l0aCBkcmF3aW5nCiAgICAgICAgdGhpcy5jYW52YXMgPSB0aGlzLiRyZWZzWydjYW52YXMtJyArIHRoaXMuY2FudmFzSWRdOwogICAgICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKCiAgICAgICAgdGhpcy50ZW1wQ3R4LmxpbmVDYXAgPSAncm91bmQnOwogICAgICAgIHRoaXMuY3R4LmxpbmVDYXAgPSAncm91bmQnOwoKICAgICAgICB0aGlzLnRlbXBDdHgubGluZVdpZHRoID0gdGhpcy5saW5lV2lkdGg7CiAgICAgICAgdGhpcy5jdHgubGluZVdpZHRoID0gdGhpcy5saW5lV2lkdGg7CgogICAgICAgIHRoaXMudGVtcEN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY3VycmVudENvbG9yOwogICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5jdXJyZW50Q29sb3I7CgogICAgICAgIHRoaXMuc2V0SXRlbSgKICAgICAgICAgIHRoaXMubmFtZSArICctc2V0dGluZ3MnLAogICAgICAgICAgSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICB3aWR0aDogdGhpcy5jYW52YXMud2lkdGgsCiAgICAgICAgICAgIGhlaWdodDogdGhpcy5jYW52YXMuaGVpZ2h0CiAgICAgICAgICB9KQogICAgICAgICk7CgogICAgICAgIC8vIHNldCBjYW52YXMgd2lkdGggYW5kIGhlaWdodAogICAgICAgIHRoaXMuc2V0Q2FudmFzU2l6ZSgpOwoKICAgICAgICAvLyBsb2FkIGltYWdlIGZyb20gc3RvcmFnZQogICAgICAgIHRoaXMubG9hZEltYWdlRnJvbVN0b3JhZ2UoKTsKCiAgICAgICAgdGhpcy4kZW1pdCgndG9nZ2xlLXBhaW50YWJsZScsIHRoaXMuaXNBY3RpdmUpOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAvLyB0aGlzLmhpZGUgPSB0cnVlOwogICAgICAgIC8vIHRoaXMuaGlkZVBhaW50YWJsZU5hdmlnYXRpb24gPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLyoqCiAgICAgKiBVbmRvIGRyYXdlZCBsaW5lCiAgICAgKi8KICAgIHVuZG9EcmF3aW5nU3RlcCgpIHsKICAgICAgdGhpcy5yZXN0b3JlQ2FudmFzU3RhdGUodGhpcy51bmRvTGlzdCwgdGhpcy5yZWRvTGlzdCk7CiAgICB9LAogICAgLyoqCiAgICAgKiBSZWRvIGRyYXdlZCBsaW5lCiAgICAgKi8KICAgIHJlZG9EcmF3aW5nU3RlcCgpIHsKICAgICAgdGhpcy5yZXN0b3JlQ2FudmFzU3RhdGUodGhpcy5yZWRvTGlzdCwgdGhpcy51bmRvTGlzdCk7CiAgICB9LAogICAgLyoqCiAgICAgKiBSZXN0b3JlIHByZXZpb3VzIGltYWdlCiAgICAgKi8KICAgIHJlc3RvcmVDYW52YXNTdGF0ZShwb3AsIHB1c2gpIHsKICAgICAgdGhpcy5jdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJzsKICAgICAgaWYgKHBvcC5sZW5ndGgpIHsKICAgICAgICBjb25zdCByZXN0b3JlX3N0YXRlID0gcG9wLnBvcCgpOwogICAgICAgIHRoaXMuc2F2ZUN1cnJlbnRDYW52YXNTdGF0ZSh0aGlzLmNhbnZhcywgcHVzaCwgdHJ1ZSk7CiAgICAgICAgdGhpcy5sb2FkSW1hZ2VGcm9tU3RvcmFnZShyZXN0b3JlX3N0YXRlKTsKICAgICAgfQogICAgfSwKICAgIC8qKgogICAgICogU2F2ZSB0aGUgY3VycmVudCBjYW52YXMgc3RhdGUgYW4gcHVzaCBpdCB0byB1bmRvLSBvciByZWRvbGlzdAogICAgICovCiAgICBzYXZlQ3VycmVudENhbnZhc1N0YXRlKGNhbnZhcywgbGlzdCwga2VlcFJlZG8pIHsKICAgICAga2VlcFJlZG8gPSBrZWVwUmVkbyB8fCBmYWxzZTsKICAgICAgaWYgKCFrZWVwUmVkbykgewogICAgICAgIHRoaXMucmVkb0xpc3QgPSBbXTsKICAgICAgfQoKICAgICAgKGxpc3QgfHwgdGhpcy51bmRvTGlzdCkucHVzaChjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKSk7CiAgICB9LAogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvKioKICAgICAqIEdldCBiYXNlNjQgZnJvbSBsb2NhbCBzdG9yYWdlIGFuZCBsb2FkIGl0IGludG8gY2FudmFzCiAgICAgKi8KICAgIGFzeW5jIGxvYWRJbWFnZUZyb21TdG9yYWdlKGltYWdlKSB7CiAgICAgIHRoaXMuY2xlYXJDYW52YXMoKTsKCiAgICAgIGNvbnN0IGJhc2U2NEltYWdlID0gaW1hZ2UgfHwgKGF3YWl0IHRoaXMuZ2V0SXRlbSh0aGlzLm5hbWUpKTsKICAgICAgaWYgKGJhc2U2NEltYWdlKSB7CiAgICAgICAgbGV0IGltYWdlID0gbmV3IEltYWdlKCk7CiAgICAgICAgaW1hZ2Uub25sb2FkID0gKCkgPT4gewogICAgICAgICAgdGhpcy5jdHguZHJhd0ltYWdlKGltYWdlLCAwLCAwKTsKICAgICAgICAgIHRoaXMuY2FudmFzSXNFbXB0eSA9IHRoaXMuaXNDYW52YXNCbGFuaygpOwogICAgICAgIH07CiAgICAgICAgaW1hZ2Uuc3JjID0gYmFzZTY0SW1hZ2U7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNhbnZhc0lzRW1wdHkgPSB0aGlzLmlzQ2FudmFzQmxhbmsoKTsKICAgICAgfQogICAgfSwKICAgIC8qKgogICAgICogU2V0IGN1cnJlbnQgY2FudmFzIHNpemUKICAgICAqLwogICAgc2V0Q2FudmFzU2l6ZSgpIHsKICAgICAgLy8gdGhpcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOwogICAgICAvLyB0aGlzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDsKICAgICAgY3VycmVudFggPSAwOwogICAgICBjdXJyZW50WSA9IDA7CiAgICB9LAogICAgLyoqCiAgICAgKiBDbGVhciBjb21wbGV0ZSBjYW52YXMKICAgICAqLwogICAgY2xlYXJDYW52YXMoKSB7CiAgICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTsKICAgIH0sCiAgICBpc0NhbnZhc0JsYW5rKCkgewogICAgICB0aGlzLmN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInOwoKICAgICAgY29uc3QgYmxhbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgY29uc3QgYmxhbmtDdHggPSBibGFuay5nZXRDb250ZXh0KCcyZCcpOwoKICAgICAgYmxhbmtDdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpOwoKICAgICAgYmxhbmsud2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aDsKICAgICAgYmxhbmsuaGVpZ2h0ID0gdGhpcy5jYW52YXMuaGVpZ2h0OwoKICAgICAgcmV0dXJuIGJsYW5rLnRvRGF0YVVSTCgpID09PSB0aGlzLmNhbnZhcy50b0RhdGFVUkwoKTsKICAgIH0sCiAgICAvKioKICAgICAqIENoZWNrIGZpcnN0LCBpZiBjYW52YXMgaXMgZW1wdHkuCiAgICAgKiBJZiBpdHMgbm90IGVtcHR5IHNhdmUgaXQgdG8gdGhlIHN0b3JhZ2UuCiAgICAgKi8KICAgIHNhdmVDdXJyZW50Q2FudmFzVG9TdG9yYWdlKCkgewogICAgICAvLyByZXNldCB0byBwZW5jaWwKICAgICAgdGhpcy5pc0VyYXNlckFjdGl2ZSA9IGZhbHNlOwoKICAgICAgaWYgKHRoaXMuaXNDYW52YXNCbGFuaygpKSB7CiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKHRoaXMubmFtZSk7CiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKHRoaXMubmFtZSArICctc2V0dGluZ3MnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5uYW1lLCB0aGlzLmNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpKTsKICAgICAgICB0aGlzLnNldEl0ZW0oCiAgICAgICAgICB0aGlzLm5hbWUgKyAnLXNldHRpbmdzJywKICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgd2lkdGg6IHRoaXMuY2FudmFzLndpZHRoLAogICAgICAgICAgICBoZWlnaHQ6IHRoaXMuY2FudmFzLmhlaWdodAogICAgICAgICAgfSkKICAgICAgICApOwogICAgICB9CiAgICAgIHRoaXMudW5kb0xpc3QgPSBbXTsKICAgICAgdGhpcy5yZWRvTGlzdCA9IFtdOwoKICAgICAgdGhpcy5jYW52YXNJc0VtcHR5ID0gdGhpcy5pc0NhbnZhc0JsYW5rKCk7CiAgICB9LAogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvKioKICAgICAqIFN0YXJ0IGRyYXdpbmcgbGluZXMKICAgICAqLwogICAgZHJhd1N0YXJ0KGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0aGlzLnRocmVzaG9sZFJlYWNoZWQgPSBmYWxzZTsKICAgICAgaWYgKHRoaXMuaXNBY3RpdmUpIHsKICAgICAgICB0aGlzLmlzTGluZVdpZHRoUGlja2VyT3BlbiA9IGZhbHNlOwogICAgICAgIHRoaXMuaXNDb2xvclBpY2tlck9wZW4gPSBmYWxzZTsKICAgICAgICB0aGlzLnN0YXJ0ZWREcmF3aW5nID0gdHJ1ZTsKCiAgICAgICAgdGhpcy5zYXZlQ3VycmVudENhbnZhc1N0YXRlKHRoaXMuY2FudmFzKTsKCiAgICAgICAgY29uc3QgeCA9ICF0aGlzLmlzTW91c2UgPyBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WCA6IGUuY2xpZW50WDsKICAgICAgICBjb25zdCB5ID0gIXRoaXMuaXNNb3VzZSA/IGUudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRZIDogZS5jbGllbnRZOwoKICAgICAgICBpZiAoeCAmJiB5KSB7CiAgICAgICAgICBjdXJyZW50WCA9CiAgICAgICAgICAgIHggKiB0aGlzLmZhY3RvciAtIHRoaXMudGVtcENhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0OwogICAgICAgICAgY3VycmVudFkgPQogICAgICAgICAgICB5ICogdGhpcy5mYWN0b3IgLSB0aGlzLnRlbXBDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wOwoKICAgICAgICAgIHRoaXMucG9pbnRDb29yZHMucHVzaCh7CiAgICAgICAgICAgIHg6IGN1cnJlbnRYLAogICAgICAgICAgICB5OiBjdXJyZW50WQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnRlbXBDdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJzsKICAgICAgICB0aGlzLmN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSB0aGlzLmlzRXJhc2VyQWN0aXZlCiAgICAgICAgICA/ICdkZXN0aW5hdGlvbi1vdXQnCiAgICAgICAgICA6ICdzb3VyY2Utb3Zlcic7CiAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIEVuZCBvZiBkcmF3aW5nIGEgbGluZQogICAgICovCiAgICBkcmF3RW5kKCkgewogICAgICBpZiAodGhpcy5pc0FjdGl2ZSkgewogICAgICAgIHRoaXMuZHJhd0xpbmUodGhpcy5jdHgpOwogICAgICAgIHRoaXMuc3RhcnRlZERyYXdpbmcgPSBmYWxzZTsKCiAgICAgICAgdGhpcy5wb2ludENvb3JkcyA9IFtdOwogICAgICAgIHRoaXMudGhyZXNob2xkUmVhY2hlZCA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgLyoqCiAgICAgKiBHZW5lcmF0ZSBsaW5lIGZyb20gcG9pbnRzIGFycmF5CiAgICAgKi8KICAgIGRyYXdMaW5lKGNvbnRleHQpIHsKICAgICAgdGhpcy50ZW1wQ3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTsKCiAgICAgIGxldCBwMSA9IHRoaXMucG9pbnRDb29yZHNbMF07CiAgICAgIGxldCBwMiA9IHRoaXMucG9pbnRDb29yZHNbMV07CgogICAgICBpZiAocDEgJiYgcDIgJiYgcDEueCAmJiBwMS55KSB7CiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTsKICAgICAgICBjb250ZXh0Lm1vdmVUbyhwMS54LCBwMS55KTsKCiAgICAgICAgZm9yIChsZXQgaSA9IDEsIGxlbiA9IHRoaXMucG9pbnRDb29yZHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgIGxldCBtaWRQb2ludCA9IHsKICAgICAgICAgICAgeDogcDEueCArIChwMi54IC0gcDEueCkgLyAyLAogICAgICAgICAgICB5OiBwMS55ICsgKHAyLnkgLSBwMS55KSAvIDIKICAgICAgICAgIH07CiAgICAgICAgICBjb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8ocDEueCwgcDEueSwgbWlkUG9pbnQueCwgbWlkUG9pbnQueSk7CiAgICAgICAgICBwMSA9IHRoaXMucG9pbnRDb29yZHNbaV07CiAgICAgICAgICBwMiA9IHRoaXMucG9pbnRDb29yZHNbaSArIDFdOwogICAgICAgIH0KCiAgICAgICAgY29udGV4dC5saW5lVG8ocDEueCwgcDEueSk7CiAgICAgICAgY29udGV4dC5zdHJva2UoKTsKICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpOwogICAgICB9CiAgICB9LAogICAgLyoqCiAgICAgKiBEcmF3IGxpbmUgb24gbW92ZSBhbmQgYWRkIGN1cnJlbnQgcG9zaXRpb24gdG8gYW4gYXJyYXkKICAgICAqLwogICAgZHJhd01vdmUoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CgogICAgICBpZiAodGhpcy5pc0FjdGl2ZSAmJiB0aGlzLnN0YXJ0ZWREcmF3aW5nKSB7CiAgICAgICAgY29uc3QgeCA9ICF0aGlzLmlzTW91c2UgPyBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WCA6IGUuY2xpZW50WDsKICAgICAgICBjb25zdCB5ID0gIXRoaXMuaXNNb3VzZSA/IGUudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRZIDogZS5jbGllbnRZOwoKICAgICAgICBpZiAoeCAmJiB5KSB7CiAgICAgICAgICBjdXJyZW50WCA9CiAgICAgICAgICAgIHggKiB0aGlzLmZhY3RvciAtIHRoaXMudGVtcENhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0OwogICAgICAgICAgY3VycmVudFkgPQogICAgICAgICAgICB5ICogdGhpcy5mYWN0b3IgLSB0aGlzLnRlbXBDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wOwoKICAgICAgICAgIHRoaXMucG9pbnRDb29yZHMucHVzaCh7CiAgICAgICAgICAgIHg6IGN1cnJlbnRYLAogICAgICAgICAgICB5OiBjdXJyZW50WQogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKHRoaXMudGhyZXNob2xkKSB7CiAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlRmlyc3RBbmRMYXN0UG9pbnQgPSBNYXRoLnNxcnQoCiAgICAgICAgICAgICAgTWF0aC5wb3coCiAgICAgICAgICAgICAgICB0aGlzLnBvaW50Q29vcmRzW3RoaXMucG9pbnRDb29yZHMubGVuZ3RoIC0gMV0ueSAtCiAgICAgICAgICAgICAgICAgIHRoaXMucG9pbnRDb29yZHNbMF0ueSwKICAgICAgICAgICAgICAgIDIKICAgICAgICAgICAgICApICsKICAgICAgICAgICAgICAgIE1hdGgucG93KAogICAgICAgICAgICAgICAgICB0aGlzLnBvaW50Q29vcmRzW3RoaXMucG9pbnRDb29yZHMubGVuZ3RoIC0gMV0ueCAtCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2ludENvb3Jkc1swXS54LAogICAgICAgICAgICAgICAgICAyCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICk7CgogICAgICAgICAgICBpZiAoZGlzdGFuY2VGaXJzdEFuZExhc3RQb2ludCA+IHRoaXMudGhyZXNob2xkKSB7CiAgICAgICAgICAgICAgaWYgKCF0aGlzLnRocmVzaG9sZFJlYWNoZWQpIHsKICAgICAgICAgICAgICAgIHRoaXMudGhyZXNob2xkUmVhY2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCd0aHJlc2hvbGRSZWFjaGVkJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5kcmF3TGluZSghdGhpcy5pc0VyYXNlckFjdGl2ZSA/IHRoaXMudGVtcEN0eCA6IHRoaXMuY3R4KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Paintable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Paintable.vue","sourceRoot":"src/components/components","sourcesContent":["<template>\n  <div class=\"paintable\" v-if=\"!hide\">\n    <Navigation\n      v-if=\"!disableNavigation\"\n      :horizontalNavigation=\"horizontalNavigation\"\n    >\n      <div slot=\"paintable-navigation-draw\"></div>\n    </Navigation>\n\n    <canvas\n      :ref=\"'canvas-' + canvasId\"\n      :class=\"{ active: isActive || alwaysOnTop }\"\n      :style=\"{\n        pointerEvents: !isActive ? 'none' : 'all',\n        display: !canvasIsEmpty || isActive ? 'block' : 'none'\n      }\"\n      class=\"canvas back\"\n      :width=\"width\"\n      :height=\"height\"\n    />\n\n    <canvas\n      :ref=\"'temp-canvas-' + canvasId\"\n      :class=\"{ active: isActive || alwaysOnTop }\"\n      :style=\"{\n        pointerEvents: !isActive ? 'none' : 'all',\n        display: !canvasIsEmpty || isActive ? 'block' : 'none'\n      }\"\n      class=\"canvas\"\n      :width=\"width\"\n      :height=\"height\"\n      @[drawMoveEvent]=\"drawMove\"\n      @[drawStartEvent]=\"drawStart\"\n      @[drawEndEvent]=\"drawEnd\"\n    />\n\n    <div class=\"content\">\n      <slot></slot>\n    </div>\n  </div>\n  <div v-else class=\"content\">\n    <slot></slot>\n  </div>\n</template>\n\n<script>\nlet currentX = 0;\nlet currentY = 0;\n\nimport Navigation from './Navigation';\n\nexport default {\n  name: 'paintable',\n  components: {\n    Navigation\n  },\n  props: {\n    factor: {\n      type: Number,\n      default: 1\n    },\n    navigation: {\n      type: Object,\n      default: null\n    },\n    alwaysOnTop: {\n      type: Boolean,\n      default: true\n    },\n    name: {\n      type: String,\n      required: true\n    },\n    width: {\n      type: Number,\n      default: window.innerWidth\n    },\n    height: {\n      type: Number,\n      default: window.innerHeight\n    },\n    hide: {\n      type: Boolean,\n      default: false\n    },\n    threshold: {\n      type: Number,\n      default: 0\n    },\n    showUndoRedo: {\n      type: Boolean,\n      default: true\n    },\n    showLineWidth: {\n      type: Boolean,\n      default: true\n    },\n    lineWidth: {\n      type: Number,\n      default: 5\n    },\n    lineWidthEraser: {\n      type: Number,\n      default: 20\n    },\n    colors: {\n      type: Array,\n      default: () => [\n        'black',\n        '#f00',\n        '#4481c7',\n        'rgba(255, 235, 59, 0.4)',\n        '#999',\n        'green'\n      ]\n    },\n    horizontalNavigation: {\n      type: Boolean,\n      default: false\n    },\n    disableNavigation: {\n      type: Boolean,\n      default: false\n    },\n    active: {\n      type: Boolean,\n      default: false\n    },\n    color: {\n      type: String,\n      default: '#000'\n    },\n    useEraser: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      currentColor: this.color,\n      canvasIsEmpty: false,\n      canvasId: 0,\n      isEraserActive: this.useEraser,\n      isActive: this.active,\n      pointCoords: [],\n      redoList: [],\n      undoList: [],\n      currentLineWidth: this.isEraserActive\n        ? this.lineWidthEraser\n        : this.lineWidth,\n      tempCanvas: null,\n      tempCtx: null,\n      canvas: null,\n      ctx: null,\n      startedDrawing: false,\n      drawMoveEvent: 'mousemove',\n      drawStartEvent: 'mousedown',\n      drawEndEvent: 'mouseup',\n      isMouse: true,\n      thresholdReached: false\n    };\n  },\n  watch: {\n    isActive: 'init',\n    name: 'init',\n    hide() {\n      this.$nextTick(() => {\n        this.init();\n      });\n    },\n    lineWidth(lineWidth) {\n      this.currentLineWidth = lineWidth;\n    },\n    lineWidthEraser(lineWidth) {\n      this.currentLineWidth = lineWidth;\n    },\n    useEraser(useEraser) {\n      this.isEraserActive = useEraser;\n    },\n    active(isActive) {\n      this.isActive = isActive;\n    },\n    color(color) {\n      this.currentColor = color;\n      this.tempCtx.strokeStyle = this.currentColor;\n      this.ctx.strokeStyle = this.currentColor;\n    },\n    isEraserActive(isActive) {\n      this.currentLineWidth = isActive ? this.lineWidthEraser : this.lineWidth;\n    },\n    currentLineWidth(lineWidth) {\n      this.ctx.lineWidth = lineWidth;\n      this.tempCtx.lineWidth = lineWidth;\n    }\n  },\n  beforeMount() {\n    this.canvasId = Math.round(Math.random() * 1000);\n  },\n  created() {\n    if (this.isTouch) {\n      this.drawMoveEvent = 'touchmove';\n      this.drawStartEvent = 'touchstart';\n      this.drawEndEvent = 'touchend';\n      this.isMouse = false;\n    }\n  },\n  mounted() {\n    this.init();\n  },\n  computed: {\n    /**\n     * Get scaling factor of current device\n     */\n    scalingFactor() {\n      return window.devicePixelRatio || 1;\n    },\n    /**\n     * Check if it is a touch device\n     * thanks to: https://ctrlq.org/code/19616-detect-touch-screen-javascript\n     */\n    isTouch() {\n      return (\n        'ontouchstart' in window ||\n        navigator.MaxTouchPoints > 0 ||\n        navigator.msMaxTouchPoints > 0\n      );\n    }\n  },\n  methods: {\n    /**\n     * Cancel current drawing and remove lines\n     */\n    cancelDrawing() {\n      this.loadImageFromStorage();\n      this.isActive = false;\n      this.isColorPickerOpen = false;\n      this.isLineWidthPickerOpen = false;\n    },\n    /**\n     * Set storage item\n     * @param {string} key\n     * @param {string} value\n     */\n    setItem(key, value) {\n      localStorage.setItem(key, value);\n    },\n    /**\n     * Get storage item\n     * @param {string} key\n     */\n    async getItem(key) {\n      return localStorage.getItem(key);\n    },\n    /**\n     * Remove item from storage\n     * @param {string} key\n     */\n    removeItem(key) {\n      localStorage.removeItem(key);\n    },\n    /**\n     * Init paintable component and set all variables\n     */\n    init() {\n      try {\n        this.pointCoords = [];\n\n        // temporary canvas\n        this.tempCanvas = this.$refs['temp-canvas-' + this.canvasId];\n        this.tempCtx = this.tempCanvas.getContext('2d');\n\n        // canvas with drawing\n        this.canvas = this.$refs['canvas-' + this.canvasId];\n        this.ctx = this.canvas.getContext('2d');\n\n        this.tempCtx.lineCap = 'round';\n        this.ctx.lineCap = 'round';\n\n        this.tempCtx.lineWidth = this.lineWidth;\n        this.ctx.lineWidth = this.lineWidth;\n\n        this.tempCtx.strokeStyle = this.currentColor;\n        this.ctx.strokeStyle = this.currentColor;\n\n        this.setItem(\n          this.name + '-settings',\n          JSON.stringify({\n            width: this.canvas.width,\n            height: this.canvas.height\n          })\n        );\n\n        // set canvas width and height\n        this.setCanvasSize();\n\n        // load image from storage\n        this.loadImageFromStorage();\n\n        this.$emit('toggle-paintable', this.isActive);\n      } catch (err) {\n        // this.hide = true;\n        // this.hidePaintableNavigation = true;\n      }\n    },\n    //--------------------------------------------------\n    /**\n     * Undo drawed line\n     */\n    undoDrawingStep() {\n      this.restoreCanvasState(this.undoList, this.redoList);\n    },\n    /**\n     * Redo drawed line\n     */\n    redoDrawingStep() {\n      this.restoreCanvasState(this.redoList, this.undoList);\n    },\n    /**\n     * Restore previous image\n     */\n    restoreCanvasState(pop, push) {\n      this.ctx.globalCompositeOperation = 'source-over';\n      if (pop.length) {\n        const restore_state = pop.pop();\n        this.saveCurrentCanvasState(this.canvas, push, true);\n        this.loadImageFromStorage(restore_state);\n      }\n    },\n    /**\n     * Save the current canvas state an push it to undo- or redolist\n     */\n    saveCurrentCanvasState(canvas, list, keepRedo) {\n      keepRedo = keepRedo || false;\n      if (!keepRedo) {\n        this.redoList = [];\n      }\n\n      (list || this.undoList).push(canvas.toDataURL('image/png'));\n    },\n    //-------------------------------------------------------------------------\n    /**\n     * Get base64 from local storage and load it into canvas\n     */\n    async loadImageFromStorage(image) {\n      this.clearCanvas();\n\n      const base64Image = image || (await this.getItem(this.name));\n      if (base64Image) {\n        let image = new Image();\n        image.onload = () => {\n          this.ctx.drawImage(image, 0, 0);\n          this.canvasIsEmpty = this.isCanvasBlank();\n        };\n        image.src = base64Image; // eslint-disable-line\n      } else {\n        this.canvasIsEmpty = this.isCanvasBlank();\n      }\n    },\n    /**\n     * Set current canvas size\n     */\n    setCanvasSize() {\n      // this.width = window.innerWidth;\n      // this.height = window.innerHeight;\n      currentX = 0;\n      currentY = 0;\n    },\n    /**\n     * Clear complete canvas\n     */\n    clearCanvas() {\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    },\n    isCanvasBlank() {\n      this.ctx.globalCompositeOperation = 'source-over';\n\n      const blank = document.createElement('canvas');\n      const blankCtx = blank.getContext('2d');\n\n      blankCtx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n      blank.width = this.canvas.width;\n      blank.height = this.canvas.height;\n\n      return blank.toDataURL() === this.canvas.toDataURL();\n    },\n    /**\n     * Check first, if canvas is empty.\n     * If its not empty save it to the storage.\n     */\n    saveCurrentCanvasToStorage() {\n      // reset to pencil\n      this.isEraserActive = false;\n\n      if (this.isCanvasBlank()) {\n        this.removeItem(this.name);\n        this.removeItem(this.name + '-settings');\n      } else {\n        this.setItem(this.name, this.canvas.toDataURL('image/png'));\n        this.setItem(\n          this.name + '-settings',\n          JSON.stringify({\n            width: this.canvas.width,\n            height: this.canvas.height\n          })\n        );\n      }\n      this.undoList = [];\n      this.redoList = [];\n\n      this.canvasIsEmpty = this.isCanvasBlank();\n    },\n    //-------------------------------------------------------------------------\n    /**\n     * Start drawing lines\n     */\n    drawStart(e) {\n      e.preventDefault();\n      this.thresholdReached = false;\n      if (this.isActive) {\n        this.isLineWidthPickerOpen = false;\n        this.isColorPickerOpen = false;\n        this.startedDrawing = true;\n\n        this.saveCurrentCanvasState(this.canvas);\n\n        const x = !this.isMouse ? e.targetTouches[0].clientX : e.clientX;\n        const y = !this.isMouse ? e.targetTouches[0].clientY : e.clientY;\n\n        if (x && y) {\n          currentX =\n            x * this.factor - this.tempCanvas.getBoundingClientRect().left;\n          currentY =\n            y * this.factor - this.tempCanvas.getBoundingClientRect().top;\n\n          this.pointCoords.push({\n            x: currentX,\n            y: currentY\n          });\n        }\n\n        this.tempCtx.globalCompositeOperation = 'source-over';\n        this.ctx.globalCompositeOperation = this.isEraserActive\n          ? 'destination-out'\n          : 'source-over';\n      }\n    },\n    /**\n     * End of drawing a line\n     */\n    drawEnd() {\n      if (this.isActive) {\n        this.drawLine(this.ctx);\n        this.startedDrawing = false;\n\n        this.pointCoords = [];\n        this.thresholdReached = false;\n      }\n    },\n    /**\n     * Generate line from points array\n     */\n    drawLine(context) {\n      this.tempCtx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n      let p1 = this.pointCoords[0];\n      let p2 = this.pointCoords[1];\n\n      if (p1 && p2 && p1.x && p1.y) {\n        context.beginPath();\n        context.moveTo(p1.x, p1.y);\n\n        for (let i = 1, len = this.pointCoords.length; i < len; i++) {\n          let midPoint = {\n            x: p1.x + (p2.x - p1.x) / 2,\n            y: p1.y + (p2.y - p1.y) / 2\n          };\n          context.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\n          p1 = this.pointCoords[i];\n          p2 = this.pointCoords[i + 1];\n        }\n\n        context.lineTo(p1.x, p1.y);\n        context.stroke();\n        context.closePath();\n      }\n    },\n    /**\n     * Draw line on move and add current position to an array\n     */\n    drawMove(e) {\n      e.preventDefault();\n\n      if (this.isActive && this.startedDrawing) {\n        const x = !this.isMouse ? e.targetTouches[0].clientX : e.clientX;\n        const y = !this.isMouse ? e.targetTouches[0].clientY : e.clientY;\n\n        if (x && y) {\n          currentX =\n            x * this.factor - this.tempCanvas.getBoundingClientRect().left;\n          currentY =\n            y * this.factor - this.tempCanvas.getBoundingClientRect().top;\n\n          this.pointCoords.push({\n            x: currentX,\n            y: currentY\n          });\n\n          if (this.threshold) {\n            const distanceFirstAndLastPoint = Math.sqrt(\n              Math.pow(\n                this.pointCoords[this.pointCoords.length - 1].y -\n                  this.pointCoords[0].y,\n                2\n              ) +\n                Math.pow(\n                  this.pointCoords[this.pointCoords.length - 1].x -\n                    this.pointCoords[0].x,\n                  2\n                )\n            );\n\n            if (distanceFirstAndLastPoint > this.threshold) {\n              if (!this.thresholdReached) {\n                this.thresholdReached = true;\n                this.$emit('thresholdReached');\n              }\n            }\n          }\n\n          this.drawLine(!this.isEraserActive ? this.tempCtx : this.ctx);\n        }\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\nbody {\n  position: fixed;\n}\n.paintable {\n  overflow: hidden;\n  position: fixed;\n  height: 100%;\n  width: 100%;\n  transform: scale(1);\n}\n.paintable.active {\n  z-index: 0;\n}\n.paintable .canvas {\n  position: relative;\n  background-color: transparent;\n  z-index: -1;\n  position: absolute;\n  left: 0;\n  top: 0;\n  overflow: hidden;\n  touch-action: none;\n}\n.paintable .canvas.active {\n  z-index: 1000;\n}\n.paintable .canvas.active.back {\n  z-index: 999;\n}\n</style>\n"]}]}