{"remainingRequest":"/Users/kimjunho/front/ssafyart_front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kimjunho/front/ssafyart_front/src/components/Nav.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kimjunho/front/ssafyart_front/src/components/Nav.vue","mtime":1588059465812},{"path":"/Users/kimjunho/front/ssafyart_front/node_modules/cache-loader/dist/cjs.js","mtime":1579183904604},{"path":"/Users/kimjunho/front/ssafyart_front/node_modules/babel-loader/lib/index.js","mtime":1587098298841},{"path":"/Users/kimjunho/front/ssafyart_front/node_modules/cache-loader/dist/cjs.js","mtime":1579183904604},{"path":"/Users/kimjunho/front/ssafyart_front/node_modules/vue-loader/lib/index.js","mtime":1587098312803}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBsb2dpbkZvcm0gZnJvbSAiQC9jb21wb25lbnRzL0xvZ2luLnZ1ZSIKaW1wb3J0IGRqYW5nb1VSTCBmcm9tICdAL2pzL2RqYW5nby11cmwuanMnCmltcG9ydCBjb29raWUgZnJvbSAiQC9qcy9jb29raWUuanMiCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiAoKSA9PiB7CiAgICByZXR1cm4geyAKICAgICAgY3VycmVudFBhc3N3b3JkOiAnJywKICAgICAgbmV3UGFzc3dvcmQ6ICcnLAogICAgICBuZXdQYXNzd29yZENvbmZyaW06ICcnLAogICAgICBlcnJvcnM6ICcnLAogICAgfQogIH0sCiAgY29tcG9uZW50czp7CiAgICBsb2dpbkZvcm0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBpc0xvZ2luOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuaXNMb2dnZWRJbgogICAgfSwKICAgIHVzZXI6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy51c2VyCiAgICB9LAogIH0sCiAgbWV0aG9kczp7CiAgICBlZGl0KCkgewogICAgICB0aGlzLiRyZWZzWyJlZGl0LW1vZGFsIl0uc2hvdygpCiAgICAgIHRoaXMuY3VycmVudFBhc3N3b3JkID0gJycKICAgICAgdGhpcy5uZXdQYXNzd29yZCA9ICcnCiAgICAgIHRoaXMubmV3UGFzc3dvcmRDb25mcmltID0gJycKICAgIH0sCiAgICBjbG9zZUVkaXQoKSB7CiAgICAgIHRoaXMuJHJlZnNbImVkaXQtbW9kYWwiXS5oaWRlKCkKICAgIH0sCiAgICBob21lKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZToiTWFpbiJ9KQogICAgfSwKICAgIGNyZWF0ZSgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6IkNyZWF0ZSJ9KQogICAgfSwKICAgIGdhbGxlcnkoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiJHYWxsZXJ5In0pCiAgICB9LAogICAgYWJvdXQoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiJBYm91dCJ9KQogICAgfSwKICAgIHNob3dNb2RhbCgpIHsKICAgICAgdGhpcy4kcmVmc1sibXktbW9kYWwiXS5zaG93KCkKICAgIH0sCiAgICBoaWRlTW9kYWwoKSB7CiAgICAgIHRoaXMuJHJlZnNbIm15LW1vZGFsIl0uaGlkZSgpCiAgICB9LAogICAgbG9nb3V0KCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbG9nb3V0JykKICAgICAgY29va2llLmxvZ291dCgpCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOidNYWluJ30pCiAgICB9LAogICAgc2lnbk91dCgpIHsKICAgICAgY29uc3QgdXNlcl9pZCA9IHRoaXMuJHN0b3JlLmdldHRlcnMudXNlcklkCiAgICAgIGRqYW5nb1VSTC5kZWxldGUoJ2FwaS92MS91c2VyLycgKyB1c2VyX2lkICsgJy8nLCB0aGlzLiRzdG9yZS5nZXR0ZXJzLnJlcXVlc3RIZWFkZXIpCiAgICAgIC50aGVuKCgpPT57CiAgICAgICAgYWxlcnQoJ+2ajOybkO2DiO2HtOqwgCDshLHqs7XsoIHsnLzroZwg7KeE7ZaJ65Cs7Ja07JqULicpCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2xvZ291dCcpCiAgICAgICAgY29va2llLmxvZ291dCgpCiAgICAgICAgdGhpcy5jbG9zZUVkaXQoKQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOidNYWluJ30pCiAgICAgIH0pCiAgICAgIC5jYXRjaCgoKSA9PnsKICAgICAgICBhbGVydCgn66y47KCc6rCAIOyDneqyvOyKteuLiOuLpC4g7J6g7Iuc7ZuEIOuLpOyLnCDsi5zrj4TtlbTso7zshLjsmpQuJykKICAgICAgfSkKICAgIH0sCiAgICBjaGVja0Zvcm0oKSB7CiAgICAgIHRoaXMuZXJyb3JzID0gW10KICAgICAgaWYgKCF0aGlzLmN1cnJlbnRQYXNzd29yZCkgewogICAgICAgIHRoaXMuZXJyb3JzLnB1c2goIu2YhOyerCDruYTrsIDrsojtmLjrpbwg7J6F66Cl7ZW07KO87IS47JqUIikKICAgICAgfQogICAgICBpZiAodGhpcy5uZXdQYXNzd29yZCA8IDgpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCLruYTrsIDrsojtmLjripQgOOyekCDsnbTsg4Eg7J6F66Cl7ZW07KO87IS47JqULiIpCiAgICAgIH0KICAgICAgaWYgKHRoaXMubmV3UGFzc3dvcmRDb25mcmltICE9IHRoaXMubmV3UGFzc3dvcmQpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCLruYTrsIDrsojtmLjrpbwg7ZmV7J247ZW07KO87IS47JqUIikKICAgICAgfQogICAgICBpZiAodGhpcy5lcnJvcnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgfSwKICAgIGNoYW5lZ2UoKSB7CiAgICAgIGlmICh0aGlzLmNoZWNrRm9ybSgpKSB7CiAgICAgICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKQogICAgICAgIGZvcm0uYXBwZW5kKCdvcmlnaW5fcGFzc3dvcmQnLCB0aGlzLmN1cnJlbnRQYXNzd29yZCkKICAgICAgICBmb3JtLmFwcGVuZCgncGFzc3dvcmQnLCB0aGlzLm5ld1Bhc3N3b3JkKQogICAgICAgIGRqYW5nb1VSTC5wdXQoJy9hcGkvdjEvdXNlci8nICsgdGhpcy4kc3RvcmUuZ2V0dGVycy51c2VySWQgKycvJywgZm9ybSwgdGhpcy4kcm91dGVyLnJlcXVlc3RIZWFkZXIpCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGFsZXJ0KHJlcy5kYXRhLm1lc3NhZ2UpCiAgICAgICAgICB0aGlzLmNsb3NlRWRpdCgpCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5yZXNwb25zZSkKICAgICAgICAgIGFsZXJ0KGVyci5yZXNwb25zZSkKICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIHZhciB3b3JkID0gIiIKICAgICAgICB0aGlzLmVycm9ycy5mb3JFYWNoKGVsZW1lbnQgPT4gewogICAgICAgICAgd29yZCArPSBlbGVtZW50ICsgJ1xuJwogICAgICAgIH0pCiAgICAgICAgYWxlcnQod29yZCkKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["Nav.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Nav.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <b-navbar toggleable=\"lg\" class=\"text-black\">\n      <b-navbar-brand @click=\"home\" class=\"nav-logo\">SSAFY ART</b-navbar-brand>\n      <b-navbar-toggle target=\"nav-collapse\"></b-navbar-toggle>\n      <b-collapse id=\"nav-collapse\" is-nav>\n        <b-navbar-nav>\n          <b-nav-item class=\"text-white\" @click=\"create\">Create</b-nav-item>\n          <b-nav-item class=\"text-white\" @click=\"about\">About</b-nav-item>\n        </b-navbar-nav>\n        <b-navbar-nav class=\"ml-auto\">\n          <b-nav-item v-if=\"!isLogin\" @click=\"showModal\">Login</b-nav-item>\n          <b-nav-item-dropdown v-else :text=\"user\" left>\n            <b-dropdown-item @click=\"edit\">Edit</b-dropdown-item>\n            <b-dropdown-item @click=\"gallery\">Gallery</b-dropdown-item>\n            <b-dropdown-item @click=\"logout\">Logout</b-dropdown-item>\n          </b-nav-item-dropdown>\n        </b-navbar-nav>\n      </b-collapse>\n    </b-navbar>\n\n    <b-modal body-class=\"p-0 w-100\" centered ref=\"my-modal\" hide-footer hide-header>\n      <login-form @login=\"hideModal()\"></login-form>\n    </b-modal>\n\n    <b-modal body-class=\"p-0 w-100\" centered ref=\"edit-modal\" hide-footer hide-header>\n      <div class=\"mx-3 mb-3 edit-div\">\n        <p class=\"text-center edit-title\">Edit User</p>\n        <div class=\"edit-content\">\n          <p class=\"text-center m-0\">Current password</p>\n          <div class=\"row justify-content-center mb-3\">\n            <input class=\"mb-2 mx-auto edit-input\" type=\"password\" v-model=\"currentPassword\" >\n          </div>\n          <p class=\"text-center m-0\">New password</p>\n          <div class=\"row justify-content-center mb-3\">\n            <input class=\"mb-2 edit-input\" type=\"password\" v-model=\"newPassword\">\n          </div>\n          <p class=\"text-center m-0\">New Password Confrim</p>\n          <div class=\"row justify-content-center mb-3\">\n            <input class=\"edit-input\" type=\"password\" v-model=\"newPasswordConfrim\">\n          </div>\n        </div>\n        <hr>\n        <div class=\"row mx-1\">\n          <b-button class=\"col-4\" @click=\"signOut\" variant=\"outline-danger\">회원 탈퇴</b-button>\n          <b-button class=\"col-4\" @click=\"closeEdit\" variant=\"outline-secondary\">닫기</b-button>\n          <b-button class=\"col-4\" @click=\"chanege\" variant=\"outline-primary\">변경</b-button>\n        </div>\n      </div>\n    </b-modal>\n    \n  </div>\n</template>\n\n<script>\n  import loginForm from \"@/components/Login.vue\"\n  import djangoURL from '@/js/django-url.js'\n  import cookie from \"@/js/cookie.js\"\n  export default {\n    data: () => {\n      return { \n        currentPassword: '',\n        newPassword: '',\n        newPasswordConfrim: '',\n        errors: '',\n      }\n    },\n    components:{\n      loginForm\n    },\n    computed: {\n      isLogin: function() {\n        return this.$store.getters.isLoggedIn\n      },\n      user: function() {\n        return this.$store.getters.user\n      },\n    },\n    methods:{\n      edit() {\n        this.$refs[\"edit-modal\"].show()\n        this.currentPassword = ''\n        this.newPassword = ''\n        this.newPasswordConfrim = ''\n      },\n      closeEdit() {\n        this.$refs[\"edit-modal\"].hide()\n      },\n      home() {\n        this.$router.push({name:\"Main\"})\n      },\n      create() {\n        this.$router.push({name:\"Create\"})\n      },\n      gallery() {\n        this.$router.push({name:\"Gallery\"})\n      },\n      about() {\n        this.$router.push({name:\"About\"})\n      },\n      showModal() {\n        this.$refs[\"my-modal\"].show()\n      },\n      hideModal() {\n        this.$refs[\"my-modal\"].hide()\n      },\n      logout() {\n        this.$store.dispatch('logout')\n        cookie.logout()\n        this.$router.push({name:'Main'})\n      },\n      signOut() {\n        const user_id = this.$store.getters.userId\n        djangoURL.delete('api/v1/user/' + user_id + '/', this.$store.getters.requestHeader)\n        .then(()=>{\n          alert('회원탈퇴가 성공적으로 진행됬어요.')\n          this.$store.dispatch('logout')\n          cookie.logout()\n          this.closeEdit()\n          this.$router.push({name:'Main'})\n        })\n        .catch(() =>{\n          alert('문제가 생겼습니다. 잠시후 다시 시도해주세요.')\n        })\n      },\n      checkForm() {\n        this.errors = []\n        if (!this.currentPassword) {\n          this.errors.push(\"현재 비밀번호를 입력해주세요\")\n        }\n        if (this.newPassword < 8) {\n          this.errors.push(\"비밀번호는 8자 이상 입력해주세요.\")\n        }\n        if (this.newPasswordConfrim != this.newPassword) {\n          this.errors.push(\"비밀번호를 확인해주세요\")\n        }\n        if (this.errors.length === 0) {\n          return true\n        }\n      },\n      chanege() {\n        if (this.checkForm()) {\n          var form = new FormData()\n          form.append('origin_password', this.currentPassword)\n          form.append('password', this.newPassword)\n          djangoURL.put('/api/v1/user/' + this.$store.getters.userId +'/', form, this.$router.requestHeader)\n          .then(res => {\n            alert(res.data.message)\n            this.closeEdit()\n          })\n          .catch(err => {\n            console.log(err.response)\n            alert(err.response)\n          })\n        } else {\n          var word = \"\"\n          this.errors.forEach(element => {\n            word += element + '\\n'\n          })\n          alert(word)\n        }\n      }\n    }\n  }\n</script>\n\n<style>\n.edit-title{\n  position: relative;\n  top: -10px;\n  font-family: 'East Sea Dokdo', cursive;\n  font-size: 5em;\n}\n\n.edit-content{\n  position: relative;\n  top: -30px;\n}\n\n.edit-content > p {\n  font-size: 12px;\n  color: #cfcfcf;\n  text-transform: uppercase;\n}\n\n.edit-input{\n  border: 0;\n  border-bottom: 1px solid;\n  width: 50%;\n  margin-top: 5px;\n  padding-bottom: 5px;\n  font-size: 16px;\n  border-bottom: 1px solid rgba(0,0,0,0.4);\n  text-align: center;\n  display: block;\n  outline: none;\n}\n\n.edit-div{\n  position: relative;\n}\n\n.navbar-brand{\n  cursor: pointer;\n}\n\n.modal-dialog{\n  height: 10px !important;\n}\n\n.nav-logo{\n  font-family: 'East Sea Dokdo', cursive;\n  font-size: 1.8em;\n}\n</style>"]}]}