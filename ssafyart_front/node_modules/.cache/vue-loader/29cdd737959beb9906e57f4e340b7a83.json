{"remainingRequest":"/Users/kimjunho/front/ssafyart_front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kimjunho/front/ssafyart_front/src/components/Nav.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/kimjunho/front/ssafyart_front/src/components/Nav.vue","mtime":1588059465812},{"path":"/Users/kimjunho/front/ssafyart_front/node_modules/css-loader/dist/cjs.js","mtime":1587098312615},{"path":"/Users/kimjunho/front/ssafyart_front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1587098312803},{"path":"/Users/kimjunho/front/ssafyart_front/node_modules/postcss-loader/src/index.js","mtime":1579183907276},{"path":"/Users/kimjunho/front/ssafyart_front/node_modules/cache-loader/dist/cjs.js","mtime":1579183904604},{"path":"/Users/kimjunho/front/ssafyart_front/node_modules/vue-loader/lib/index.js","mtime":1587098312803}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWRpdC10aXRsZXsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgdG9wOiAtMTBweDsKICBmb250LWZhbWlseTogJ0Vhc3QgU2VhIERva2RvJywgY3Vyc2l2ZTsKICBmb250LXNpemU6IDVlbTsKfQoKLmVkaXQtY29udGVudHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgdG9wOiAtMzBweDsKfQoKLmVkaXQtY29udGVudCA+IHAgewogIGZvbnQtc2l6ZTogMTJweDsKICBjb2xvcjogI2NmY2ZjZjsKICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOwp9CgouZWRpdC1pbnB1dHsKICBib3JkZXI6IDA7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkOwogIHdpZHRoOiA1MCU7CiAgbWFyZ2luLXRvcDogNXB4OwogIHBhZGRpbmctYm90dG9tOiA1cHg7CiAgZm9udC1zaXplOiAxNnB4OwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsMCwwLDAuNCk7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGRpc3BsYXk6IGJsb2NrOwogIG91dGxpbmU6IG5vbmU7Cn0KCi5lZGl0LWRpdnsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KCi5uYXZiYXItYnJhbmR7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgoubW9kYWwtZGlhbG9newogIGhlaWdodDogMTBweCAhaW1wb3J0YW50Owp9CgoubmF2LWxvZ297CiAgZm9udC1mYW1pbHk6ICdFYXN0IFNlYSBEb2tkbycsIGN1cnNpdmU7CiAgZm9udC1zaXplOiAxLjhlbTsKfQo="},{"version":3,"sources":["Nav.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuKA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Nav.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <b-navbar toggleable=\"lg\" class=\"text-black\">\n      <b-navbar-brand @click=\"home\" class=\"nav-logo\">SSAFY ART</b-navbar-brand>\n      <b-navbar-toggle target=\"nav-collapse\"></b-navbar-toggle>\n      <b-collapse id=\"nav-collapse\" is-nav>\n        <b-navbar-nav>\n          <b-nav-item class=\"text-white\" @click=\"create\">Create</b-nav-item>\n          <b-nav-item class=\"text-white\" @click=\"about\">About</b-nav-item>\n        </b-navbar-nav>\n        <b-navbar-nav class=\"ml-auto\">\n          <b-nav-item v-if=\"!isLogin\" @click=\"showModal\">Login</b-nav-item>\n          <b-nav-item-dropdown v-else :text=\"user\" left>\n            <b-dropdown-item @click=\"edit\">Edit</b-dropdown-item>\n            <b-dropdown-item @click=\"gallery\">Gallery</b-dropdown-item>\n            <b-dropdown-item @click=\"logout\">Logout</b-dropdown-item>\n          </b-nav-item-dropdown>\n        </b-navbar-nav>\n      </b-collapse>\n    </b-navbar>\n\n    <b-modal body-class=\"p-0 w-100\" centered ref=\"my-modal\" hide-footer hide-header>\n      <login-form @login=\"hideModal()\"></login-form>\n    </b-modal>\n\n    <b-modal body-class=\"p-0 w-100\" centered ref=\"edit-modal\" hide-footer hide-header>\n      <div class=\"mx-3 mb-3 edit-div\">\n        <p class=\"text-center edit-title\">Edit User</p>\n        <div class=\"edit-content\">\n          <p class=\"text-center m-0\">Current password</p>\n          <div class=\"row justify-content-center mb-3\">\n            <input class=\"mb-2 mx-auto edit-input\" type=\"password\" v-model=\"currentPassword\" >\n          </div>\n          <p class=\"text-center m-0\">New password</p>\n          <div class=\"row justify-content-center mb-3\">\n            <input class=\"mb-2 edit-input\" type=\"password\" v-model=\"newPassword\">\n          </div>\n          <p class=\"text-center m-0\">New Password Confrim</p>\n          <div class=\"row justify-content-center mb-3\">\n            <input class=\"edit-input\" type=\"password\" v-model=\"newPasswordConfrim\">\n          </div>\n        </div>\n        <hr>\n        <div class=\"row mx-1\">\n          <b-button class=\"col-4\" @click=\"signOut\" variant=\"outline-danger\">회원 탈퇴</b-button>\n          <b-button class=\"col-4\" @click=\"closeEdit\" variant=\"outline-secondary\">닫기</b-button>\n          <b-button class=\"col-4\" @click=\"chanege\" variant=\"outline-primary\">변경</b-button>\n        </div>\n      </div>\n    </b-modal>\n    \n  </div>\n</template>\n\n<script>\n  import loginForm from \"@/components/Login.vue\"\n  import djangoURL from '@/js/django-url.js'\n  import cookie from \"@/js/cookie.js\"\n  export default {\n    data: () => {\n      return { \n        currentPassword: '',\n        newPassword: '',\n        newPasswordConfrim: '',\n        errors: '',\n      }\n    },\n    components:{\n      loginForm\n    },\n    computed: {\n      isLogin: function() {\n        return this.$store.getters.isLoggedIn\n      },\n      user: function() {\n        return this.$store.getters.user\n      },\n    },\n    methods:{\n      edit() {\n        this.$refs[\"edit-modal\"].show()\n        this.currentPassword = ''\n        this.newPassword = ''\n        this.newPasswordConfrim = ''\n      },\n      closeEdit() {\n        this.$refs[\"edit-modal\"].hide()\n      },\n      home() {\n        this.$router.push({name:\"Main\"})\n      },\n      create() {\n        this.$router.push({name:\"Create\"})\n      },\n      gallery() {\n        this.$router.push({name:\"Gallery\"})\n      },\n      about() {\n        this.$router.push({name:\"About\"})\n      },\n      showModal() {\n        this.$refs[\"my-modal\"].show()\n      },\n      hideModal() {\n        this.$refs[\"my-modal\"].hide()\n      },\n      logout() {\n        this.$store.dispatch('logout')\n        cookie.logout()\n        this.$router.push({name:'Main'})\n      },\n      signOut() {\n        const user_id = this.$store.getters.userId\n        djangoURL.delete('api/v1/user/' + user_id + '/', this.$store.getters.requestHeader)\n        .then(()=>{\n          alert('회원탈퇴가 성공적으로 진행됬어요.')\n          this.$store.dispatch('logout')\n          cookie.logout()\n          this.closeEdit()\n          this.$router.push({name:'Main'})\n        })\n        .catch(() =>{\n          alert('문제가 생겼습니다. 잠시후 다시 시도해주세요.')\n        })\n      },\n      checkForm() {\n        this.errors = []\n        if (!this.currentPassword) {\n          this.errors.push(\"현재 비밀번호를 입력해주세요\")\n        }\n        if (this.newPassword < 8) {\n          this.errors.push(\"비밀번호는 8자 이상 입력해주세요.\")\n        }\n        if (this.newPasswordConfrim != this.newPassword) {\n          this.errors.push(\"비밀번호를 확인해주세요\")\n        }\n        if (this.errors.length === 0) {\n          return true\n        }\n      },\n      chanege() {\n        if (this.checkForm()) {\n          var form = new FormData()\n          form.append('origin_password', this.currentPassword)\n          form.append('password', this.newPassword)\n          djangoURL.put('/api/v1/user/' + this.$store.getters.userId +'/', form, this.$router.requestHeader)\n          .then(res => {\n            alert(res.data.message)\n            this.closeEdit()\n          })\n          .catch(err => {\n            console.log(err.response)\n            alert(err.response)\n          })\n        } else {\n          var word = \"\"\n          this.errors.forEach(element => {\n            word += element + '\\n'\n          })\n          alert(word)\n        }\n      }\n    }\n  }\n</script>\n\n<style>\n.edit-title{\n  position: relative;\n  top: -10px;\n  font-family: 'East Sea Dokdo', cursive;\n  font-size: 5em;\n}\n\n.edit-content{\n  position: relative;\n  top: -30px;\n}\n\n.edit-content > p {\n  font-size: 12px;\n  color: #cfcfcf;\n  text-transform: uppercase;\n}\n\n.edit-input{\n  border: 0;\n  border-bottom: 1px solid;\n  width: 50%;\n  margin-top: 5px;\n  padding-bottom: 5px;\n  font-size: 16px;\n  border-bottom: 1px solid rgba(0,0,0,0.4);\n  text-align: center;\n  display: block;\n  outline: none;\n}\n\n.edit-div{\n  position: relative;\n}\n\n.navbar-brand{\n  cursor: pointer;\n}\n\n.modal-dialog{\n  height: 10px !important;\n}\n\n.nav-logo{\n  font-family: 'East Sea Dokdo', cursive;\n  font-size: 1.8em;\n}\n</style>"]}]}